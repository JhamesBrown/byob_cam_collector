<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <title>BYOB_camcollector</title>  
	<link rel="stylesheet" type="text/css" href="main.css">
	<script type = "text/javascript" src="/jquery.js"></script>
	<script type = "text/javascript" src="/swfobject.js"></script>
	<script type = "text/javascript" src="/processing-1.4.1.js"></script>
	<script type = "text/javascript" src="/processing-anim.js" ></script>
	
	
	<script type = "text/javascript" src="scriptcam-master/scriptcam.js"></script>
	<script type = "text/javascript"> 
	    $(document).ready(function() {
	        $("#webcam").scriptcam({
	            width: 640,
	            height:480,
	            showMicrophoneErrors:false,
	            onError:onError,
	            cornerRadius:10,
	            cornerColor:'e3e5e2',
	            onWebcamReady:onWebcamReady,
			
	            onPictureAsBase64: base64_tofield_and_image
               
	        })
            
	    });
		
		$(document).keydown(function() {
		$('<img />')
				.attr('style',"width:128px;height:96px")
				.attr('src',"data:image/png;base64,"+$.scriptcam.getFrameAsBase64())
				.prependTo('#mylist')
		});	
		
		function base64_tofield() {
		    console.log($.scriptcam.getFrameAsBase64());
		};
		
		function base64_toimage() {
			$('#image').attr("src","data:image/png;base64,"+$.scriptcam.getFrameAsBase64());
		};
		
	
		
		function base64_tofield_and_image(b64) {
			$('#formfield').val(b64);
			$('#image').attr("src","data:image/png;base64,"+b64);
		};
		function changeCamera() {
			$.scriptcam.changeCamera($('#cameraNames').val());
		}
		function onError(errorId,errorMsg) {
			$( "#btn1" ).attr( "disabled", true );
			$( "#btn2" ).attr( "disabled", true );
			alert(errorMsg);
		}			
		function onWebcamReady(cameraNames,camera,microphoneNames,microphone,volume) {
			/*$.each(cameraNames, function(index, text) {
				$('#cameraNames').append( $('<option></option>').val(index).html(text) )
			}); 
			$('#cameraNames').val(camera);*/
		    /*$('#' + data.id).get(0).SC_changeCamera(cameraNames[0]);
		    
		        while (true) {
		            
		            setTimeout(base64_tofield(), 3000);
		        }*/
		}
	</script> 
	
</head> 
 
<body style="background-image:url(images/bg_tile_02.jpg);"> 
    <header>
		
	
	</header>
	
	<div style="width:640px; margin-left:auto; margin-right:auto; margin-top:60px; padding:0px;">
			<div id="webcam">
			</div>
			
		</div>
		
				
		<div id="mylist" style="width: 640px; margin-left:auto; margin-right:auto; margin-top:60px; padding:0px;">
		</div>
	
	
</body>
</html>
